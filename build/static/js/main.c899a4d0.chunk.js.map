{"version":3,"sources":["components/MainButton/MainButton.module.scss","components/Button/Button.module.scss","components/Home/Home.module.scss","components/Result/Result.module.scss","components/Wheel/styles.js","components/WheelCanvas/styles.js","assets/wheel.png","components/WheelCanvas/index.js","components/Wheel/index.js","assets/arrow.png","assets/line.png","components/MainButton/index.js","components/Button/index.js","components/Home/index.js","App.js","api/wheel-api/index.js","contexts/wheel-context.js","index.js"],"names":["module","exports","RouletteContainer","styled","div","RotationContainer","props","startRotationDegrees","startSpinningTime","continueSpinningTime","stopSpinningTime","finalRotationDegrees","RouletteSelectorImage","img","posLeft","posTop","RouletteLineImage","Img","canvas","WheelCanvas","src","wheel","Wheel","mustStartSpinning","prizeNumber","onStopSpinning","data","React","useState","wheelData","setStartRotationDegrees","setFinalRotationDegrees","hasStartedSpinning","setHasStartedSpinning","hasStoppedSpinning","setHasStoppedSpinning","isCurrentlySpinning","setIsCurrentlySpinning","divRef","useRef","isMount","setIsMount","mustStopSpinning","useEffect","normalizedSpinDuration","Math","max","totalSpinningTime","startSpinning","finalRotationDegreesCalculated","numberOfPrizes","degreesPerPrize","prizeRotation","random","getRotationDegrees","length","current","setTimeout","ref","className","width","offsetWidth","height","offsetHeight","alt","MainButton","onClick","disabled","styles","root","disabledButton","header","Button","title","box","id","subTittle","view","int","Home","mustSpin","setMustSpin","showWin","setShowWin","result","setResult","sum","i","rand","floor","s","randomByArrayWithChances","console","log","titleContainer","titleResult","wheelBox","resultContainer","buttons","container","App","instance","axios","create","baseURL","wheelAPI","get","user","post","put","winner","SET_USER","SET_USER_INFO","SET_WINNERS","CHANGE_BALANCE","initialState","userInfo","winners","WheelContext","createContext","WheelContextProvider","useReducer","reducer","state","dispatch","actions","getUser","a","currUser","balance","type","payload","changeBalance","getWinners","addWinner","setUserInfo","info","Provider","value","children","action","bridge","send","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c899a4d0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"MainButton_root__9qtVo\",\"disabledButton\":\"MainButton_disabledButton__3kHdW\",\"header\":\"MainButton_header__2EHOB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"Button_box__WSvhB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Home_root__1KqaX\",\"title\":\"Home_title__36NTf\",\"wheelBox\":\"Home_wheelBox__2DpO1\",\"buttons\":\"Home_buttons__6OgKu\",\"container\":\"Home_container__3_Gv-\",\"titleContainer\":\"Home_titleContainer__6tNKX\",\"titleResult\":\"Home_titleResult__W1G2j\",\"subTittle\":\"Home_subTittle__12vf3\",\"resultContainer\":\"Home_resultContainer__2zgPc\",\"result\":\"Home_result__1Tr_J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Result_root__1WWmC\",\"title\":\"Result_title__16kuU\",\"subTittle\":\"Result_subTittle__39_53\",\"result\":\"Result_result__1eH4Q\"};","import styled from \"styled-components\";\r\n\r\nexport const RouletteContainer = styled.div`\r\n  position: relative;\r\n  height: 99.7%;\r\n  overflow: hidden;\r\n  object-fit: contain;\r\n  flex-shrink: 0;\r\n  z-index: 5;\r\n  pointer-events: none;\r\n`;\r\n\r\nexport const RotationContainer = styled.div`\r\n  //border: 3px solid red;\r\n  position: absolute;\r\n  width: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transform: rotate(${(props) => props.startRotationDegrees}deg);\r\n  &.started-spinning {\r\n    animation: spin ${({ startSpinningTime }) => startSpinningTime / 1000}s\r\n        cubic-bezier(0.71, 0.29, 0.96, 0.9) 0s 1 normal forwards running,\r\n      continueSpin ${({ continueSpinningTime }) => continueSpinningTime / 1000}s\r\n        linear ${({ startSpinningTime }) => startSpinningTime / 1000}s 1 normal\r\n        forwards running,\r\n      stopSpin ${({ stopSpinningTime }) => stopSpinningTime / 1000}s\r\n        cubic-bezier(0, 0, 0.35, 1.02)\r\n        ${({ startSpinningTime, continueSpinningTime }) =>\r\n          (startSpinningTime + continueSpinningTime) / 1000}s\r\n        1 normal forwards running;\r\n  }\r\n  @keyframes spin {\r\n    from {\r\n      transform: rotate(${(props) => props.startRotationDegrees}deg);\r\n    }\r\n    to {\r\n      transform: rotate(${(props) => props.startRotationDegrees + 360}deg);\r\n    }\r\n  }\r\n  @keyframes continueSpin {\r\n    from {\r\n      transform: rotate(${(props) => props.startRotationDegrees}deg);\r\n    }\r\n    to {\r\n      transform: rotate(${(props) => props.startRotationDegrees + 360}deg);\r\n    }\r\n  }\r\n  @keyframes stopSpin {\r\n    from {\r\n      transform: rotate(${(props) => props.startRotationDegrees}deg);\r\n    }\r\n    to {\r\n      transform: rotate(${(props) => 1440 + props.finalRotationDegrees}deg);\r\n    }\r\n  }\r\n`;\r\n\r\nexport const RouletteSelectorImage = styled.img`\r\n  -webkit-user-drag: none;\r\n  -khtml-user-drag: none;\r\n  -moz-user-drag: none;\r\n  -o-user-drag: none;\r\n  user-drag: none;\r\n\r\n  height: 3em;\r\n  position: absolute;\r\n  z-index: 2;\r\n  left: ${(props) => props.posLeft}px;\r\n  top: ${(props) => props.posTop}px;\r\n  transform: translate(-50%, -50%);\r\n`;\r\nexport const RouletteLineImage = styled.img`\r\n  -webkit-user-drag: none;\r\n  -khtml-user-drag: none;\r\n  -moz-user-drag: none;\r\n  -o-user-drag: none;\r\n  user-drag: none;\r\n\r\n  position: absolute;\r\n  z-index: 1;\r\n  width: 4px;\r\n  height: 100%;\r\n  left: ${(props) => props.posLeft}px;\r\n  top: ${(props) => props.posTop}px;\r\n  transform: translate(-50%, -100%);\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nexport const WheelCanvasStyle = styled.canvas`\r\n  width: 98%;\r\n  height: 98%;\r\n`;\r\n\r\nexport const Img = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/wheel.480fa12f.png\";","import React from \"react\";\r\nimport { Img, WheelCanvasStyle } from \"./styles\";\r\nimport wheel from \"../../assets/wheel.png\";\r\n\r\nconst colors = [\"#00C7B1\", \"#753BBD\"];\r\n\r\nexport const clamp = (min, max, val) => Math.min(Math.max(min, +val), max);\r\n\r\nconst drawWheel = (canvasRef, data) => {\r\n  const QUANTITY = data.length;\r\n\r\n  const canvas = canvasRef.current;\r\n  if (canvas?.getContext(\"2d\")) {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    // ctx.clearRect(0, 0, 500, 500);\r\n    ctx.strokeStyle = \"transparent\";\r\n    ctx.lineWidth = 0;\r\n\r\n    const arc = Math.PI / (QUANTITY / 2);\r\n    const startAngle = 0;\r\n    const outsideRadius = canvas.width / 2 - 10;\r\n    const fontSize = canvas.width / 20;\r\n\r\n    const clampedTextDistance = clamp(0, 100, 60);\r\n    const textRadius = (outsideRadius * clampedTextDistance) / 100;\r\n\r\n    const clampedInsideRadius = clamp(0, 100, 1);\r\n    const insideRadius = (outsideRadius * clampedInsideRadius) / 100;\r\n\r\n    const centerX = canvas.width / 2;\r\n    const centerY = canvas.height / 2;\r\n\r\n    ctx.beginPath();\r\n    // ctx.font = `bold ${fontSize}px Helvetica, Arial`;\r\n    //ctx.arc(centerX , centerY, outsideRadius + 5,startAngle,Math.PI*2,false);\r\n    ctx.fill();\r\n    ctx.save();\r\n\r\n    //ctx.drawImage(wheel,centerX,centerY);\r\n\r\n    const img = new Image();\r\n    img.onload = function () {\r\n      ctx.drawImage(\r\n        img,\r\n        centerX / 2,\r\n        centerY / 2,\r\n        canvas.width / 2,\r\n        canvas.width / 2\r\n      );\r\n\r\n      ctx.beginPath();\r\n      ctx.lineWidth = 5;\r\n      ctx.strokeStyle = \"#000000\";\r\n      ctx.moveTo(centerX, centerX);\r\n      ctx.lineTo(centerX, centerY - outsideRadius / 2);\r\n      ctx.stroke();\r\n      ctx.save();\r\n    };\r\n    img.src = wheel;\r\n\r\n    // for (let i = 0; i < data.length; i++) {\r\n    //   const angle = startAngle + i * arc;\r\n    //   ctx.fillStyle = colors[i % 2];\r\n    //\r\n    //   ctx.beginPath();\r\n    //   ctx.arc(centerX, centerY, outsideRadius, angle, angle + arc, false);\r\n    //   ctx.arc(centerX, centerY, insideRadius, angle + arc, angle, true);\r\n    //   ctx.stroke();\r\n    //   ctx.fill();\r\n    //\r\n    //\r\n    //   let g = ctx.createRadialGradient(centerX, centerX, 0, outsideRadius, outsideRadius, outsideRadius);\r\n    //   g.addColorStop(1, \"#753BBD\");\r\n    //   g.addColorStop(0, \"rgba(117, 59, 189, 0)\");\r\n    //\r\n    //   ctx.fillStyle = g;\r\n    //   ctx.fill();\r\n    //\r\n    //   ctx.save();\r\n    //\r\n    //   ctx.strokeStyle = 1 <= 0 ? 'transparent' : 1;\r\n    //   ctx.lineWidth = 1;\r\n    //   for (let j = 0; j < data.length; j++) {\r\n    //     const radiusAngle = startAngle + j * arc;\r\n    //     ctx.beginPath();\r\n    //     ctx.moveTo(\r\n    //       centerX + (insideRadius + 1) * Math.cos(radiusAngle),\r\n    //       centerY + (insideRadius + 1) * Math.sin(radiusAngle)\r\n    //     );\r\n    //     ctx.lineTo(\r\n    //       centerX + (outsideRadius - 1) * Math.cos(radiusAngle),\r\n    //       centerY + (outsideRadius - 1) * Math.sin(radiusAngle)\r\n    //     );\r\n    //     ctx.closePath();\r\n    //     ctx.stroke();\r\n    //\r\n    //   }\r\n    //\r\n    //\r\n    //   ctx.fillStyle = '#fff';\r\n    //\r\n    //   // const text = data[i].label;\r\n    //   //\r\n    //   // if (typeof text !== 'string') {\r\n    //   //   ctx.translate(\r\n    //   //     centerX + Math.cos(angle + arc / 2) * textRadius * 1.5,\r\n    //   //     centerY + Math.sin(angle + arc / 2) * textRadius * 1.5\r\n    //   //   );\r\n    //   // } else {\r\n    //   //   ctx.translate(\r\n    //   //     centerX + Math.cos(angle + arc / 2) * textRadius,\r\n    //   //     centerY + Math.sin(angle + arc / 2) * textRadius\r\n    //   //   );\r\n    //   // }\r\n    //   //\r\n    //   // const textRotationAngle =\r\n    //   //   typeof text !== 'string'\r\n    //   //     ? angle + arc / 2 + Math.PI / 2\r\n    //   //     : angle + arc / 2;\r\n    //   // ctx.rotate(textRotationAngle);\r\n    //   // ctx.fillText(text, -ctx.measureText(text).width / 2, fontSize / 2.7);\r\n    //   // ctx.restore();\r\n    // }\r\n\r\n    const triangle = {\r\n      //the first vertex is on the circumscribed circle at 0 radians where R is the radius of the circle ( R)\r\n      //you may decide to change this.\r\n      x1: centerX + insideRadius,\r\n      y1: centerY,\r\n      //the second vertex is on the circumscribed circle at 2*Math.PI/3 radians\r\n      //you may decide to change this.\r\n      x2: centerX + insideRadius * Math.cos((12 * Math.PI) / 3),\r\n      y2: centerY + insideRadius * Math.sin((12 * Math.PI) / 3),\r\n      //calculate the 3-rd vertex\r\n      x3: centerX + insideRadius * Math.cos((14 * Math.PI) / 3),\r\n      y3: centerY + insideRadius * Math.sin((14 * Math.PI) / 3),\r\n\r\n      x4: centerX + insideRadius + 10,\r\n      y4: centerY + 10,\r\n      //the second vertex is on the circumscribed circle at 2*Math.PI/3 radians\r\n      //you may decide to change this.\r\n      x5: centerX + insideRadius * Math.cos((12 * Math.PI) / 3) + 10,\r\n      y5: centerY + insideRadius * Math.sin((12 * Math.PI) / 3) + 10,\r\n      //calculate the 3-rd vertex\r\n      x6: centerX + insideRadius * Math.cos((14 * Math.PI) / 3) + 10,\r\n      y6: centerY + insideRadius * Math.sin((14 * Math.PI) / 3) + 10,\r\n    };\r\n\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(triangle.x1, triangle.y1); // первая внешняя точка\r\n    // ctx.lineTo(triangle.x2, triangle.y2); //вторая внешняя точка\r\n    // ctx.lineTo(triangle.x3, triangle.y2); //третья внешняя точка\r\n    // ctx.lineTo(triangle.x4, triangle.y4); //первая внутренняя точка\r\n    // ctx.lineTo(triangle.x5, triangle.y5); //вторая внутренняя точка\r\n    // ctx.lineTo(triangle.x6, triangle.y6); //третья внутренняя точка\r\n    // ctx.closePath();\r\n    // ctx.fillStyle ='#ff0000';\r\n    // ctx.fill();\r\n    // ctx.save();\r\n  }\r\n};\r\n\r\nexport const WheelCanvas = () => {\r\n  return <Img src={wheel} />;\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  RouletteContainer,\r\n  RotationContainer,\r\n  RouletteSelectorImage,\r\n  RouletteLineImage,\r\n} from \"./styles\";\r\nimport { WheelCanvas } from \"../WheelCanvas\";\r\nimport img from \"../../assets/arrow.png\";\r\nimport line from \"../../assets/line.png\";\r\n\r\nconst STARTED_SPINNING = \"started-spinning\";\r\nconst START_SPINNING_TIME = 2600;\r\nconst CONTINUE_SPINNING_TIME = 750;\r\nconst STOP_SPINNING_TIME = 8000;\r\nconst DEFAULT_SPIN_DURATION = 1.0;\r\n\r\nconst getRotationDegrees = (prizeNumber, numberOfPrizes) => {\r\n  const degreesPerPrize = 360 / numberOfPrizes;\r\n\r\n  const initialRotation = 90 + degreesPerPrize / 2;\r\n\r\n  const randomDifference = (-1 + Math.random() * 2) * degreesPerPrize * 0.35;\r\n\r\n  const prizeRotation =\r\n    degreesPerPrize * (numberOfPrizes - prizeNumber) -\r\n    initialRotation +\r\n    randomDifference;\r\n\r\n  return numberOfPrizes - prizeNumber > numberOfPrizes / 2\r\n    ? -360 + prizeRotation\r\n    : prizeRotation;\r\n};\r\n\r\nexport const Wheel = ({\r\n  mustStartSpinning,\r\n  prizeNumber,\r\n  onStopSpinning,\r\n  data,\r\n}) => {\r\n  const [wheelData, setWheelData] = React.useState([...data]);\r\n  const [startRotationDegrees, setStartRotationDegrees] = React.useState(0);\r\n  const [finalRotationDegrees, setFinalRotationDegrees] = React.useState(0);\r\n  const [hasStartedSpinning, setHasStartedSpinning] = React.useState(false);\r\n  const [hasStoppedSpinning, setHasStoppedSpinning] = React.useState(false);\r\n  const [isCurrentlySpinning, setIsCurrentlySpinning] = React.useState(false);\r\n  const divRef = React.useRef(null);\r\n  const [isMount, setIsMount] = React.useState(false);\r\n  const mustStopSpinning = React.useRef(false);\r\n\r\n  React.useEffect(() => {\r\n    setIsMount(true);\r\n  }, []);\r\n\r\n  const normalizedSpinDuration = Math.max(0.01, DEFAULT_SPIN_DURATION);\r\n\r\n  const startSpinningTime = START_SPINNING_TIME * normalizedSpinDuration;\r\n  const continueSpinningTime = CONTINUE_SPINNING_TIME * normalizedSpinDuration;\r\n  const stopSpinningTime = STOP_SPINNING_TIME * normalizedSpinDuration;\r\n\r\n  const totalSpinningTime =\r\n    startSpinningTime + continueSpinningTime + stopSpinningTime;\r\n\r\n  React.useEffect(() => {\r\n    if (mustStartSpinning && !isCurrentlySpinning) {\r\n      setIsCurrentlySpinning(true);\r\n      startSpinning();\r\n      const finalRotationDegreesCalculated = getRotationDegrees(\r\n        prizeNumber,\r\n        wheelData.length\r\n      );\r\n      setFinalRotationDegrees(finalRotationDegreesCalculated);\r\n    }\r\n  }, [mustStartSpinning]);\r\n\r\n  React.useEffect(() => {\r\n    if (hasStoppedSpinning) {\r\n      setIsCurrentlySpinning(false);\r\n      setStartRotationDegrees(finalRotationDegrees);\r\n    }\r\n  }, [hasStoppedSpinning]);\r\n\r\n  const startSpinning = () => {\r\n    setHasStartedSpinning(true);\r\n    setHasStoppedSpinning(false);\r\n    mustStopSpinning.current = true;\r\n    setTimeout(() => {\r\n      if (mustStopSpinning.current) {\r\n        mustStopSpinning.current = false;\r\n        setHasStartedSpinning(false);\r\n        setHasStoppedSpinning(true);\r\n        onStopSpinning();\r\n      }\r\n    }, totalSpinningTime);\r\n  };\r\n\r\n  const getRouletteClass = () => {\r\n    if (hasStartedSpinning) {\r\n      return STARTED_SPINNING;\r\n    }\r\n    return \"\";\r\n  };\r\n\r\n  return (\r\n    <RouletteContainer ref={divRef}>\r\n      <RotationContainer\r\n        className={getRouletteClass()}\r\n        startSpinningTime={startSpinningTime}\r\n        continueSpinningTime={continueSpinningTime}\r\n        stopSpinningTime={stopSpinningTime}\r\n        startRotationDegrees={startRotationDegrees}\r\n        finalRotationDegrees={finalRotationDegrees}\r\n      >\r\n        {isMount && (\r\n          <WheelCanvas\r\n            width={divRef.current.offsetWidth}\r\n            height={divRef.current.offsetHeight}\r\n            data={wheelData}\r\n          />\r\n        )}\r\n      </RotationContainer>\r\n      {isMount && (\r\n        <RouletteSelectorImage\r\n          src={img}\r\n          alt=\"roulette-static\"\r\n          posLeft={divRef.current.offsetWidth / 2}\r\n          posTop={divRef.current.offsetHeight / 2}\r\n        />\r\n      )}\r\n      {isMount && (\r\n        <RouletteLineImage\r\n          src={line}\r\n          alt=\"roulette-static\"\r\n          posLeft={divRef.current.offsetWidth / 2}\r\n          posTop={divRef.current.offsetHeight / 2}\r\n        />\r\n      )}\r\n    </RouletteContainer>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAF7CAYAAADrOxptAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABLSURBVHgB7coxAQAgDMCwgn/PYGH/kjuneg3chkRRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRXBQ/lM8D9WH9bMgAAAAASUVORK5CYII=\"","import React from \"react\";\nimport styles from \"./MainButton.module.scss\";\n\nconst MainButton = ({ onClick, disabled }) => {\n  return (\n    <div\n      className={`${styles.root} ${disabled ? styles.disabledButton : \"\"}`}\n      onClick={onClick}\n    >\n      <div\n        className={`${styles.header} ${disabled ? styles.disabledButton : \"\"}`}\n      >\n        <p>Крутить</p>\n      </div>\n    </div>\n  );\n};\n\nexport default MainButton;\n","import React from \"react\";\nimport styles from \"./Button.module.scss\";\n\nconst Button = ({ title }) => {\n  return <div className={styles.box}>{title}</div>;\n};\n\nexport default Button;\n","import React from \"react\";\nimport { Wheel } from \"../Wheel\";\nimport styles from \"./Home.module.scss\";\nimport MainButton from \"../MainButton\";\nimport Button from \"../Button\";\nimport Result from \"../Result\";\n\nconst data = [\n  {\n    id: \"freeBat\",\n    title: \"О, СЧАСТЛИВЧИК!\",\n    subTittle:\n      \"Мы сами почти не верим, что это произошло. Ты выиграл фрибет на 200р. Наш менеджер свяжется с тобой, чтобы уточнить детали личного счета.\",\n    view: \"Продолжай играть, кажется, тебе очень везёт!\",\n    int: 100,\n  },\n  {\n    id: \"ВТОРОЙ ШАНС\",\n    title: \"ВТОРОЙ ШАНС\",\n    subTittle:\n      \"В этот раз баллов ты не заработал, но получаешь дополнительную попытку! Давай ещё разок?\",\n    view: \"+1 ПОПЫТКА\",\n    int: 1000,\n  },\n  {\n    id: \"+100\",\n    title: \"НЕ ИМЕЙ 100 ДРУЗЕЙ, А ИМЕЙ…\",\n    subTittle:\n      \"Даже не знаем, что лучше: 100 друзей или 100 баллов. Продолжаем!\",\n    view: \"+100 БАЛЛОВ\",\n    int: 1000,\n  },\n  {\n    id: \"+50\",\n    title: \"ИДЕАЛЬНЫЙ БАЛАНС\",\n    subTittle:\n      \"Стакан наполовину полон? Ты получаешь 50 баллов, а это ровно половина от максимума. Круто, крути дальше!\",\n    view: \"+50 БАЛЛОВ\",\n    int: 1000,\n  },\n  {\n    id: \"+10\",\n    title: \"В ДЕСЯТКУ!\",\n    subTittle: \"Понемногу пробиваемся в лидеры топа. Так держать!\",\n    view: \"+10 БАЛЛОВ\",\n    int: 5000,\n  },\n  {\n    id: \"+5\",\n    title: \"ДАЙ ПЯТЬ\",\n    subTittle:\n      \"Неплохо, а, главное, результативно – ты набираешь 5 баллов. Дай пять!\",\n    view: \"+5 БАЛЛОВ\",\n    int: 5000,\n  },\n  {\n    id: \"+0\",\n    title: \"ПУСТЫШКА\",\n    subTittle: \"Попытка хорошая, но баллов, увы, не принесла. Попробуем снова?\",\n    view: \"+0 БАЛЛОВ\",\n    int: 5000,\n  },\n  {\n    id: \"-10\",\n    title: \"ОЙ-ОЙ\",\n    subTittle:\n      \"Немного не повезло, фортуна отвернулась от тебя. Чем же ты ей насолил?\",\n    view: \"–10 БАЛЛОВ\",\n    int: 5000,\n  },\n];\n\nconst win = {\n  id: \"+10\",\n  title: \"В ДЕСЯТКУ!\",\n  subTittle: \"Понемногу пробиваемся в лидеры топа. Так держать!\",\n  view: \"+10 БАЛЛОВ\",\n  int: 5000,\n};\n\nconst randomByArrayWithChances = (data) => {\n  let sum = 0;\n  for (let i = 0; i < data.length; i++) {\n    sum += data[i].int;\n  }\n\n  let rand = Math.floor(Math.random() * sum);\n\n  let i = 0;\n  for (let s = data[0].int; s <= rand; s += data[i].int) {\n    i++;\n  }\n\n  return data[i];\n};\n\nexport const Home = () => {\n  const [prizeNumber, setPrizeNumber] = React.useState(0);\n  const [mustSpin, setMustSpin] = React.useState(false);\n  const [showWin, setShowWin] = React.useState(false);\n  const [isMount, setIsMount] = React.useState(false);\n  const [result, setResult] = React.useState(data[0]);\n  const divRef = React.useRef(null);\n\n  React.useEffect(() => {\n    setIsMount(true);\n  }, []);\n\n  React.useEffect(() => {\n    if (isMount && !mustSpin) {\n      setShowWin(true);\n      setResult(randomByArrayWithChances(data));\n      console.log(result);\n    }\n  }, [mustSpin]);\n\n  const handleSpinClick = () => {\n    setShowWin(false);\n    setMustSpin(true);\n  };\n  //!showWin && isMount\n  return (\n    <div className={styles.root} ref={divRef}>\n      {!showWin && isMount ? (\n        <h1 className={styles.title} data-text=\"На удачу\">\n          На удачу\n        </h1>\n      ) : (\n        <div className={styles.titleContainer}>\n          <h1 className={styles.titleResult}>{result.title}</h1>\n          <p className={styles.subTittle}>{result.subTittle}</p>\n        </div>\n      )}\n      {!showWin && isMount ? (\n        <div className={styles.wheelBox}>\n          <Wheel\n            mustStartSpinning={mustSpin}\n            prizeNumber={prizeNumber}\n            data={data}\n            onStopSpinning={() => {\n              setMustSpin(false);\n            }}\n          />\n        </div>\n      ) : (\n        <div className={styles.resultContainer}>\n          <h1 className={styles.result} data-text={result.view}>\n            {result.view}\n          </h1>\n        </div>\n      )}\n      <div className={styles.buttons}>\n        <span>5 попыток</span>\n        <MainButton onClick={handleSpinClick} disabled={mustSpin} />\n        {isMount && (\n          <div className={styles.container}>\n            <Button title={divRef.current.offsetWidth} />\n            <Button title={divRef.current.offsetHeight} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Home } from \"./components/Home\";\nimport \"./App.css\";\n\nexport const App = () => {\n  return (\n    <div className=\"root\">\n      <Home />\n    </div>\n  );\n};\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  //baseURL: 'http://localhost:5000/api/',\r\n  baseURL: 'https://dead-pear-chipmunk-suit.cyclic.app/api/',\r\n});\r\n\r\nexport const wheelAPI = {\r\n  getUser(id) {\r\n    return instance.get(`users/${id}`);\r\n  },\r\n  createUser(user) {\r\n    return instance.post(`users/`, user);\r\n  },\r\n  changeBalance(user) {\r\n    return instance.put(`users/`, user);\r\n  },\r\n  getWinners() {\r\n    return instance.get(`winners/`);\r\n  },\r\n  addWinner(winner) {\r\n    return instance.post(`winners/`, winner);\r\n  },\r\n};\r\n","import React from 'react';\r\nimport { wheelAPI } from '../api/wheel-api';\r\n\r\nconst SET_USER = 'SET_USER';\r\nconst SET_USER_INFO = 'SET_USER_INFO';\r\nconst SET_WINNERS = 'SET_WINNERS';\r\nconst ADD_WINNER = 'ADD_WINNER';\r\nconst CHANGE_BALANCE = 'CHANGE_BALANCE';\r\n\r\nconst initialState = {\r\n  userInfo: null,\r\n  user: null,\r\n  winners: [],\r\n};\r\nconst WheelContext = React.createContext();\r\n\r\nexport const WheelContextProvider = (props) => {\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n\r\n  const actions = {\r\n    getUser: async (id) => {\r\n      let currUser = { id, balance: 1000 };\r\n      const { data } = await wheelAPI.getUser(id);\r\n\r\n      if (!data.user) {\r\n        await wheelAPI.createUser(currUser);\r\n      } else {\r\n        currUser = data.user;\r\n      }\r\n\r\n      dispatch({\r\n        type: SET_USER,\r\n        payload: currUser,\r\n      });\r\n    },\r\n    changeBalance: async (currUser) => {\r\n      const { data } = await wheelAPI.changeBalance(currUser);\r\n      dispatch({\r\n        type: CHANGE_BALANCE,\r\n        payload: data.user,\r\n      });\r\n    },\r\n    getWinners: async () => {\r\n      const { data } = await wheelAPI.getWinners();\r\n\r\n      dispatch({\r\n        type: SET_WINNERS,\r\n        payload: data.winners,\r\n      });\r\n    },\r\n    addWinner: async (winner) => {\r\n      const { data } = await wheelAPI.addWinner(winner);\r\n\r\n      dispatch({\r\n        type: SET_WINNERS,\r\n        payload: data.winners,\r\n      });\r\n    },\r\n    setUserInfo: (info) => {\r\n      dispatch({\r\n        type: SET_USER_INFO,\r\n        payload: info,\r\n      });\r\n    },\r\n  };\r\n\r\n  return (\r\n    <WheelContext.Provider value={{ state, actions }}>\r\n      {props.children}\r\n    </WheelContext.Provider>\r\n  );\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case SET_USER: {\r\n      return { ...state, user: action.payload };\r\n    }\r\n    case SET_WINNERS: {\r\n      return { ...state, winners: action.payload };\r\n    }\r\n    case ADD_WINNER: {\r\n      return { ...state, winners: action.payload };\r\n    }\r\n    case CHANGE_BALANCE: {\r\n      return { ...state, user: action.payload };\r\n    }\r\n    case SET_USER_INFO: {\r\n      return { ...state, userInfo: action.payload };\r\n    }\r\n  }\r\n};\r\n\r\nexport const useWheelState = () => {\r\n  return React.useContext(WheelContext).state;\r\n};\r\n\r\nexport const useWheelActions = () => {\r\n  return React.useContext(WheelContext).actions;\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { App } from './App';\r\nimport { WheelContextProvider } from './contexts/wheel-context';\r\nimport './index.css';\r\n\r\nbridge.send('VKWebAppInit');\r\n\r\nReactDOM.render(\r\n  <WheelContextProvider>\r\n    <App />\r\n  </WheelContextProvider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}